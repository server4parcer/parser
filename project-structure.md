# YCLIENTS Parser - Структура проекта

## Обзор структуры

```
yclients-parser/
├── .env                          # Файл с переменными окружения (прокси, креды и пр.)
├── .gitignore                    # Игнорируемые Git файлы
├── README.md                     # Документация по проекту
├── requirements.txt              # Зависимости Python
├── docker-compose.yml            # Конфигурация Docker для развертывания
├── Dockerfile                    # Dockerfile для сборки контейнера
├── config/
│   ├── __init__.py
│   ├── settings.py               # Основные настройки проекта
│   └── logging_config.py         # Конфигурация логирования
├── src/
│   ├── __init__.py
│   ├── main.py                   # Точка входа в приложение
│   ├── browser/
│   │   ├── __init__.py
│   │   ├── browser_manager.py    # Управление браузером Playwright
│   │   ├── stealth_config.py     # Настройки анти-обнаружения
│   │   └── proxy_manager.py      # Управление прокси-серверами
│   ├── parser/
│   │   ├── __init__.py
│   │   ├── yclients_parser.py    # Основной класс парсера
│   │   ├── selectors.py          # Селекторы элементов страницы
│   │   └── data_extractor.py     # Извлечение структурированных данных
│   ├── database/
│   │   ├── __init__.py
│   │   ├── db_manager.py         # Управление соединением с БД
│   │   ├── models.py             # Модели данных
│   │   └── queries.py            # SQL-запросы
│   ├── export/
│   │   ├── __init__.py
│   │   ├── csv_exporter.py       # Экспорт в CSV
│   │   └── json_exporter.py      # Экспорт в JSON
│   ├── api/
│   │   ├── __init__.py
│   │   ├── routes.py             # API маршруты
│   │   └── auth.py               # Аутентификация API
│   └── scheduler/
│       ├── __init__.py
│       └── cron_manager.py       # Управление расписанием парсинга
├── tests/
│   ├── __init__.py
│   ├── test_parser.py            # Тесты парсера
│   ├── test_database.py          # Тесты базы данных
│   └── test_api.py               # Тесты API
└── scripts/
    ├── install.sh                # Скрипт установки
    ├── setup_db.py               # Настройка базы данных
    └── setup_cron.py             # Настройка cron-задач
```

## Описание ключевых компонентов

### 1. Конфигурация проекта
- **settings.py** - Содержит все глобальные настройки проекта, включая URL-адреса для парсинга, таймауты, размеры буферов и т.д.
- **logging_config.py** - Настройка системы логирования с ротацией файлов и оповещениями.

### 2. Управление браузером
- **browser_manager.py** - Инициализация и управление браузером Playwright.
- **stealth_config.py** - Настройки для эмуляции реального пользователя и обхода обнаружения бота.
- **proxy_manager.py** - Вращение прокси-серверов для избежания блокировок.

### 3. Парсер YCLIENTS
- **yclients_parser.py** - Основной класс для парсинга страниц YCLIENTS.
- **selectors.py** - Коллекция CSS/XPath селекторов для нахождения элементов на странице.
- **data_extractor.py** - Методы для извлечения и структурирования данных.

### 4. Управление данными
- **db_manager.py** - Интерфейс для взаимодействия с PostgreSQL через Supabase.
- **models.py** - Определения моделей данных для хранения.
- **queries.py** - Готовые SQL запросы для манипуляции данными.

### 5. Экспорт данных
- **csv_exporter.py** - Экспорт данных в CSV формат.
- **json_exporter.py** - Экспорт данных в JSON формат.

### 6. API-интерфейс
- **routes.py** - Определение REST API маршрутов.
- **auth.py** - Аутентификация и авторизация для API.

### 7. Планировщик
- **cron_manager.py** - Управление расписанием парсинга каждые 10 минут.

### 8. Тесты и скрипты
- **tests/** - Модульные и интеграционные тесты.
- **scripts/** - Вспомогательные скрипты для установки и настройки.
